ROOT=../..
CFLAGS = -Wall -g -I$(ROOT)
LIHATA=$(ROOT)/liblihata/parser.o $(ROOT)/liblihata/liblihata.a
OBJS_LIB = ../lhtpers.o
OBJS_TESTER = perstest.o
OBJS = $(OBJS_LIB) $(OBJS_TESTER) $(LIHATA)
LDLIBS = $(LIBGENHT)

include $(ROOT)/Makefile.conf

all: perstest

# dependencies
include Makefile.dep

perstest: $(OBJS) $(LIBGENHT_DEP)

test:
	@cd roundtrip && make test

depend:
	@echo "# Generated by \"make depend\"" > Makefile.dep
	gcc $(CFLAGS) -MM `echo $(OBJS) | sed "s/\.o/.c/g"` >> Makefile.dep

clean:
	-rm $(OBJS) test_simple $(OBJS) 2>/dev/null

include $(ROOT)/Makefile.common
